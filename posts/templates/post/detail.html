{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
    {% with post.category as category %}
{#    <h1>{{ category }}</h1>#}
{#    {% if category.parent %}#}
{#        <h2>Go up to#}
{#            <a href="{{ category.parent.get_absolute_url }}">#}
{#                {{ category.parent }}#}
{#            </a></h2>#}
{#    {% endif %}#}
{#    {% if category.description %}<p>{{ category.description }}</p>{% endif %}#}
{#    {% if category.children.count %}#}
{#        <h2>Subcategories</h2>#}
{#        <ul>#}
{#            {% for child in category.children.all %}#}
{#            <li><a href="{{ child.get_absolute_url }}">{{ child }}</a></li>#}
{#            {% endfor %}#}
{#        </ul>#}
{#    {% endif %}#}
{#    <h2>Entries</h2>#}
{#    {% if category.entries_set.all %}#}
{#        {% for entry in category.entries_set.all %}#}
{#            <p><a href="{{ entry.get_absolute_url }}">{{ entry.headline }}</a></p>#}
{#        {% endfor %}#}
{#    {% else %}#}
{#        <p><em>No entries for {{ category }}</em></p>#}
{#    {% endif %}#}
        {% for cat in category.get_ancestors %}
            <a href="{{ cat.get_absolute_url }}">{{ cat.name }}</a>
            {% if not forloop.last %}
                >
            {% endif %}
        {% endfor %}
    {% endwith %}

    <h1>{{ post.title }}</h1>
    <p class="tags">
        Tagi:
        {% for tag in post.tags.all %}
            <a href="{% url 'posts:list_by_tag' tag.slug %}">
                {{ tag.name }}
            </a>
            {% if not forloop.last %}, {% endif %}
        {% endfor %}
    </p>
    <p class="category">
        Category: {{ post.category }}
    </p>
    <p class="date">
        Opublikowany {{ post.publish }} przez {{ post.author }}
    </p>
    {{ post.get_markdown }}
    <hr/>
    <h2>Podobne posty</h2>
    <div class="similar-posts">
        {% for post in similar_posts %}
            <p>
                <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
            </p>
        {% empty %}
            Nie ma podobnych postow.
        {% endfor %}
    </div>
{% endblock %}